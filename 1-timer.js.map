{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\n\nconst btnStart = document.querySelector('body button[data-start]');\nbtnStart.classList.add('btn-start');\n\nconst dataDays = document.querySelector('span[data-days]');\n\nconst dataHours = document.querySelector('span[data-hours]');\n\nconst dataMinutes = document.querySelector('span[data-minutes]');\n\nconst dataSeconds = document.querySelector('span[data-seconds]');\n\nbtnStart.disabled = true;\n\nlet userSelectedDate;\n\nlet interval = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    userSelectedDate = selectedDates[0];\n    const newDate = new Date();\n    if (userSelectedDate < newDate) {\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        backgroundColor: 'pink',\n        position: 'topRight',\n      });\n      btnStart.disabled = true;\n      return;\n    } else {\n      btnStart.disabled = false;\n    }\n  },\n};\n\nflatpickr(input, options);\n\nbtnStart.addEventListener('click', btnStartTime);\n\nfunction btnStartTime(event) {\n  interval = setInterval(() => {\n    const currentTime = userSelectedDate.getTime();\n    const deltaTime = currentTime - Date.now();\n    const timerConvert = convertMs(deltaTime);\n\n    dataDays.textContent = timerConvert.days;\n    dataHours.textContent = timerConvert.hours;\n    dataMinutes.textContent = timerConvert.minutes;\n    dataSeconds.textContent = timerConvert.seconds;\n\n    if (deltaTime <= 0) {\n      clearInterval(interval);\n      dataDays.textContent = '00';\n      dataHours.textContent = '00';\n      dataMinutes.textContent = '00';\n      dataSeconds.textContent = '00';\n      input.disabled = false;\n    }\n  }, 1000);\n\n  input.disabled = true;\n  btnStart.disabled = true;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\n//   console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n//   console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n//   console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["input","btnStart","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","interval","options","selectedDates","iziToast","flatpickr","btnStartTime","event","deltaTime","timerConvert","convertMs","ms","days","addLeadingZero","hours","minutes","seconds","value"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAW,SAAS,cAAc,yBAAyB,EACjEA,EAAS,UAAU,IAAI,WAAW,EAElC,MAAMC,EAAW,SAAS,cAAc,iBAAiB,EAEnDC,EAAY,SAAS,cAAc,kBAAkB,EAErDC,EAAc,SAAS,cAAc,oBAAoB,EAEzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/DJ,EAAS,SAAW,GAEpB,IAAIK,EAEAC,EAAW,KAEf,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAIrB,GAHA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BH,EAAmBG,EAAc,CAAC,EAE9BH,EADY,IAAI,KACY,CAC9BI,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,OACjB,SAAU,UAClB,CAAO,EACDT,EAAS,SAAW,GACpB,MACN,MACMA,EAAS,SAAW,EAEvB,CACH,EAEAU,EAAUX,EAAOQ,CAAO,EAExBP,EAAS,iBAAiB,QAASW,CAAY,EAE/C,SAASA,EAAaC,EAAO,CAC3BN,EAAW,YAAY,IAAM,CAE3B,MAAMO,EADcR,EAAiB,UACL,KAAK,IAAG,EAClCS,EAAeC,EAAUF,CAAS,EAExCZ,EAAS,YAAca,EAAa,KACpCZ,EAAU,YAAcY,EAAa,MACrCX,EAAY,YAAcW,EAAa,QACvCV,EAAY,YAAcU,EAAa,QAEnCD,GAAa,IACf,cAAcP,CAAQ,EACtBL,EAAS,YAAc,KACvBC,EAAU,YAAc,KACxBC,EAAY,YAAc,KAC1BC,EAAY,YAAc,KAC1BL,EAAM,SAAW,GAEpB,EAAE,GAAI,EAEPA,EAAM,SAAW,GACjBC,EAAS,SAAW,EACtB,CAEA,SAASe,EAAUC,EAAI,CAQrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAMA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}